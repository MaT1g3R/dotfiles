fpath+=~/.zfunc
export PATH=/usr/local/bin:$HOME/.local/bin:$PATH
autoload -Uz compinit; compinit -iCd $HOME/.zcompdump
zstyle ':completion:*' menu select

# OS dependent config
if [ `uname` != 'Linux' ]; then # macOS
    export PATH="/usr/local/opt/qt/bin:/usr/local/opt/llvm/bin:/usr/local/bin:/usr/local/opt/coreutils/libexec/gnubin:$PATH"
    export MANPATH="/usr/local/opt/coreutils/libexec/gnuman:$MANPATH"
fi

# nvim
if [[ -n $VIRTUAL_ENV && -e "${VIRTUAL_ENV}/bin/activate" ]]; then
  source "${VIRTUAL_ENV}/bin/activate"
fi

GEOMETRY_PROMPT_PLUGINS=(virtualenv exec_time git jobs rustup)
for x in $HOME/dotfiles/shell/*.zsh; do source $x; done

export EDITOR=nvim
export VISUAL=nvim
export PAGER=nvimpager
export BAT_PAGER=less
export TASKRC=$HOME/.config/task/taskrc

# cd without cd
setopt auto_cd

# zsh-autoenv
export AUTOENV_FILE_ENTER=.envrc
source ~/lib/zsh-autoenv/autoenv.zsh

source $HOME/private.zsh
export PATH=$HOME/bin:$PATH

bindkey "^R" history-incremental-pattern-search-backward

autoload bashcompinit
bashcompinit
source $HOME/dotfiles/completions/*

autoload -U +X bashcompinit && bashcompinit
complete -o nospace -C /usr/local/bin/vault vault

# emacs mode
bindkey -e
bindkey "^[[1;5D" backward-word
bindkey "^[[1;5C" forward-word
autoload -z edit-command-line
zle -N edit-command-line
bindkey "^X^E" edit-command-line

#set history size
export HISTSIZE=10000
#save history after logout
export SAVEHIST=10000
#history file
export HISTFILE=~/.zhistory
#append into history file
setopt INC_APPEND_HISTORY
#save only one command if 2 common are same and consistent
setopt HIST_IGNORE_DUPS
#add timestamp for each entry
setopt EXTENDED_HISTORY

#THIS MUST BE AT THE END OF THE FILE FOR SDKMAN TO WORK!!!
export SDKMAN_DIR="/home/umi/.sdkman"
[[ -s "/home/umi/.sdkman/bin/sdkman-init.sh" ]] && source "/home/umi/.sdkman/bin/sdkman-init.sh"

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# Add RVM to PATH for scripting. Make sure this is the last PATH variable change.
export PATH="$PATH:$HOME/.rvm/bin"
