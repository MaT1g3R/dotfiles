#!/usr/bin/env python3

from sys import argv
from urllib.parse import quote_plus
from requests import get, HTTPError

IG = '.gitignore'
BASEURL = f'https://raw.githubusercontent.com/github/gitignore/master/{{}}{IG}'

if __name__ == '__main__':
    if len(argv) != 2:
        print('Usage: gitignore <FILETYPE>')
        exit(1)
    ft = argv[1].strip()
    url = BASEURL.format(quote_plus(ft))
    with get(url) as resp:
        try:
            resp.raise_for_status()
        except HTTPError as e:
            print(e.args[0])
            exit(1)
        else:
            with open(IG, 'w+') as f:
                f.write(resp.text)
            print(f'Success! Saved {ft}{IG} as {IG}')
